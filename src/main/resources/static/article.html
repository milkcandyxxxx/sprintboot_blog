<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>文章详情 - 奶糖</title>

    <!-- 保留 nes.css 核心样式（非Markdown相关） -->
    <link rel="stylesheet" href="css/nes.css"/>
    
    <!-- 添加article.css外部样式文件 -->
    <link rel="stylesheet" href="css/article.css"/>

    <!-- 1. 导入 GitHub Markdown CSS（CDN，替代自定义Markdown样式） -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.5.1/github-markdown.min.css">

    <!-- 2. 导入 highlight.js（CDN，代码高亮，替代本地版本） -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/github.min.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>

    <!-- 保留必要依赖：Vue 和 Axios -->
    <script src="js/vue.global.js"></script>
    <script src="js/axios.min.js"></script>

    <!-- 添加article.js外部脚本文件 -->
    <script src="js/article.js"></script>

</head>
<body>
<div class="page-wrapper">
    <div id="app" class="content-wrapper">
        <header class="nes-container is-centered">
            <h1 id='hitokoto_text'>加载中...</h1>
            <p id="hitokoto_author"></p>
        </header>

        <div class="article-container nes-container with-title">
            <p class="title">📝 正文</p>
            <h2 class="article-title">{{ article.title || '加载中...' }}</h2>
            <div class="article-meta" v-if="article.createTime">
                发表于 {{ formatTime(article.createTime) }} |
                分类：{{ article.categoryText || '未分类' }}
            </div>

            <div v-if="loading" class="loading">
                <div class="nes-balloon from-left">
                    <p>加载中...</p>
                </div>
            </div>

            <div v-else-if="error" class="error">
                <div class="nes-balloon from-left">
                    <p>{{ error }}</p>
                </div>
                <button class="nes-btn is-error" @click="retry">重试</button>
            </div>

            <!-- 4. Markdown内容容器：添加 markdown-body 类名，让GitHub样式生效 -->
            <div v-else class="article-content markdown-body" v-html="article.content || '<p>暂无内容</p>'"></div>

            <button
                    class="nes-btn is-primary back-btn"
                    onclick="window.location.href='catalogue.html'"
            >
                ⬅ 返回首页
            </button>
        </div>

        <footer>奶糖の糖袋子</footer>
    </div>
</div>

<!-- 保留原有辅助脚本（若无需可删除） -->
<script src="js/loader.js"></script>
<iframe
        src="fixed-action-buttons.html"
        style="position: fixed; bottom: 0; right: 0; border: none; width: auto; height: auto; z-index: 9999;"
        frameborder="0"
        scrolling="no"
></iframe>